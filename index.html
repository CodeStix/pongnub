<!DOCTYPE html>
<!--<![endif]-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="google-site-verification" content="X-NyWbTQ-1CgZ7cvLZYPOc0BzO7PblJv201J3PJXAJI">


  <title>PongNub</title>

  <meta name="description" content="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.">
  <meta name="viewport" content="width=device-width, target-densityDpi=device-dpi, initial-scale=1.0, maximum-scale=1.5;">


  <script type="text/javascript" src="./assets/main.js"></script>
  <script type="text/javascript" src="./assets/pd.js"></script>
  <script type="text/javascript" async="" src="./assets/inpage_linkid.js" id="undefined"></script>
  <script type="text/javascript" async="" src="./assets/bf.min.js"></script>
  <script type="text/javascript" async="" src="./assets/ga.js"></script>
  <script src="./assets/30715011.js"></script>

  <link rel="icon" type="image/png" href="http://www.pubnub.com/static/images/structure/favicon.png">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Press+Start+2P">
  <link rel="stylesheet" href="http://www.pubnub.com/static/css/styles.css?ts=1404164785">
  <!--[if lt IE 9]> <script src="/static/js/ie.js?ts=1404164785"></script> <![endif]-->

  <link href="bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet">

</head>

<body id="app" class="satemplate" data-ember-extension="1">
<!-- Google Tag Manager -->


  <div id="alert_container" class="alert  hidden"></div>
  <style media="screen">
    a[name=tutorial]:before {
      content: "";
      display: block;
      height: 100px;
      /* fixed header height*/
      margin: -100px 0 0;
      /* negative fixed header height */
    }
    #app-hero {
      background:white;
      background-attachment: fixed;
    }
    #demo {
      background: white;
      background-attachment: fixed;
    }
    .code {
      font-family: "Courier New", Courier, monospace;
      font-size: 15px;
    }
    #game {
      display: block;
      margin: 0 auto;
    }
    #qrcode {
      display: block;
      margin: 20px auto;
      text-align: center;
    }
    #qrcode img{
      margin: 0 auto;
    }
  </style>
  <div class="section gray padding-extra" id="app-hero">
    <div class="container">
      <h1 class="text-center" style="font-family: 'Press Start 2P', cursive;">PongNub</h1>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3" style="margin-bottom: -40px;">
          <p class="text-center">
          Build and play the classic arcade video game, Pong, using PubNub. Read the QR code below to play from your mobile device or open up another window to access the controls from your browser.
          <h4 class="text-center"><a href="" id="controlLink">Controls</a></h4>
          </p>
          <div id="qrcode"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3 padding-top text-center">
          <a href="https://github.com/pubnub/pongnub" target="_blank" class="btn btn-primary card">GitHub</a>
          <a href="#tutorial" class="btn btn-primary card">Tutorial</a>
        </div>
      </div>
    </div>
  </div>

  <div class="section padding-extra white" id="demo" style="margin-top: -100px; min-height: 0px;">
    <iframe id="game" src="img/blank.png" width="640" height="480" scrolling="no" seamless="seamless" frameborder="0">
      <p>Your browser does not support iframes.</p>
    </iframe>
    <!--
    <iframe src="game.html" width="640" height="480" scrolling="no" seamless="seamless" frameborder="0" style="display: block; margin: 0 auto;">
      <p>Your browser does not support iframes.</p>
      </iframe>
      -->
  </div>

  <a name="tutorial"></a>


  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/pubnub/dist/web/pubnub.min.js"></script>
  <!--<script src="./assets/main.js"></script> -->
  <script src="bower_components/qrcode.js/lib/qrcode.min.js"></script>


  <script>
    var rand = Math.floor(Math.random()*10000);

    var pubnub = new PubNub({
      publishKey: 'pub-c-0ecaf3c4-bc3a-4e03-94e7-e85e196fdc4c',
      subscribeKey: 'sub-c-673a62aa-24c9-11e4-a77a-02ee2ddab7fe'
    });

    var chan = "pongnub" + rand;

    var z = setInterval(function() {
        pubnub.hereNow({
          channel: chan,
          callback: function(m) {
            if (m.occupancy) {
              if ($("#game").attr('src') !== ("game.html?id=" + rand)) $("#game").attr("src", "game.html?id=" + rand);
            }
          }
        });
    }, 1000);

  $("#controlLink").attr("href", "controller.html?id=" + rand);

   var controllerURL = window.location.protocol + "://"
                       + window.location.hostname
                       + "/pongnub/controller.html?id=" + rand

new QRCode(document.getElementById("qrcode"), {
  text: id=controllerURL
  width: 164,
  height: 164,
  colorDark: "#444",
  colorLight: "#ffffff"
});
  </script>

  <div id="loading">
    <div class="mask"></div>
    <div class="indication">
      <img src="./assets/loading.gif">
      <h3 class="text-red">Loading...</h3>
    </div>
  </div>





</body>

</html>
